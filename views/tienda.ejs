<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>La RetroMusicVideo/Tienda</title>
    <link rel="shortcut icon" href="/images/favicon-32x32.png" type="image/x-icon">
    <link rel="stylesheet" href="/css/normalize.css">
    <link rel="stylesheet" href="/css/tiendaestilos.css">
    <script src="/js/menutienda.js" defer></script>
    <script src="/js/bannertienda.js" defer></script>
</head>
<body>
    <header class="hero">
        <div class="banner">
            <img src="/images/leftarrow.svg" alt="leftarrow" class="testimony__arrow" id="before">
            <div class="slide">
                <picture class="active"><source srcset="/images/imagenes webp/bannerretro.webp" type="image/webp"><img class="img-baner" src="/images/bannerretro.jpg" alt="banner retro"></picture>
                <picture><source srcset="/images/imagenes webp/bannerpelicula.webp" type="image/webp"><img class="img-baner" src="/images/bannerpelicula.png" alt="Banner Pelicula"></picture>
                <picture><source srcset="/images/imagenes webp/bannervideojuegos.webp" type="image/webp"><img class="img-baner" src="/images/bannervideojuegos.png" alt="Banner Videojuegos"></picture>
            </div>
            <img src="/images/rightarrow.svg" alt="rightarrow" class="testimony__arrow" id="next">
        </div>
        <nav class="nav container">
            <div class="nav__logo">
                <h2 id="subir" class="nav__title">RetroMusicVideo</h2>
            </div>
            <ul class="nav__link nav__link--menu">
                <li class="nav__items"><a href="/" class="nav__links">Inicio</a></li>
                <li class="nav__items"><a href="#musica" class="nav__links">Retro Musica</a></li>
                <li class="nav_items"><a href="#games" class="nav__links">Retro Games</a></li>
                <li class="nav_items"><a href="#pelas" class="nav__links">Retro Pelas</a></li>
                <li class="nav_items"><a href="/carrito.html" target="_blank" class="nav__links">Carrito</a></li>
                <img src="/images/close.svg" class="nav__close" alt="close">
            </ul>
            <div class="nav__menu"><img src="/images/menu.svg" class="nav__img" alt="menu"></div>
        </nav>
    </header>

    <main id="tienda__contenedor">

        <section class="price container">
            <h2 id="musica">Retro Musica</h2>
            <div class="price__table">
                <% if (typeof productos !== 'undefined' && productos.length > 0) { %>
                    <% let hayMusica = false; %>
                    <% productos.forEach(producto => { %>
                        <%# Verifica si la categoría existe y empieza con 'musica' (ignorando mayús/minús) %>
                        <% if (producto.categoria && producto.categoria.toLowerCase().startsWith('musica')) { %>
                            <% hayMusica = true; %>
                            <div class="price__element">
                                <figure class="price__picture">
                                    <img src="<%= producto.imagen_url %>" alt="<%= producto.nombre %>" class="price__img">
                                </figure>
                                <p class="price__name"><%= producto.nombre %></p>
                                <h3 class="price__precio">s/.<%= parseFloat(producto.precio).toFixed(2) %></h3>
                                <%# ----- ASEGÚRATE DE QUE ESTA LÍNEA ES CORRECTA ----- %>
                                <a href="/producto/<%= producto.id %>" class="price__cta">Ver Detalles</a>
                                <%# ---------------------------------------------------- %>
                            </div>
                        <% } %>
                    <% }); %>
                    <% if (!hayMusica) { %><p>No hay productos de música disponibles.</p><% } %>
                <% } else { %>
                    <p>No hay productos disponibles en este momento.</p>
                <% } %>
            </div>
        </section>

        <div class="subir"><a href="#subir" class="subir__link">Ir al Inicio</a></div>
        <div><hr class="linea"></div>

        <section class="price container">
            <h2 id="games">Retro Games</h2>
            <div class="price__table">
                <% if (typeof productos !== 'undefined' && productos.length > 0) { %>
                     <% let hayGames = false; %>
                    <% productos.forEach(producto => { %>
                        <%# Verifica si la categoría existe y empieza con 'videojuegos' %>
                        <% if (producto.categoria && producto.categoria.toLowerCase().startsWith('videojuegos')) { %>
                             <% hayGames = true; %>
                            <div class="price__element">
                                <figure class="price__picture">
                                    <img src="<%= producto.imagen_url %>" alt="<%= producto.nombre %>" class="price__img">
                                </figure>
                                <p class="price__name"><%= producto.nombre %></p>
                                <h3 class="price__precio">s/.<%= parseFloat(producto.precio).toFixed(2) %></h3>
                                <%# ----- ASEGÚRATE DE QUE ESTA LÍNEA ES CORRECTA ----- %>
                                <a href="/producto/<%= producto.id %>" class="price__cta">Ver Detalles</a>
                                <%# ---------------------------------------------------- %>
                            </div>
                        <% } %>
                    <% }); %>
                     <% if (!hayGames) { %><p>No hay videojuegos disponibles.</p><% } %>
                <% } else { %>
                    <p>No hay productos disponibles en este momento.</p>
                <% } %>
            </div>
        </section>

        <div class="subir"><a href="#subir" class="subir__link">Ir al Inicio</a></div>
        <div><hr class="linea"></div>

        <section class="price container">
            <h2 id="pelas">Retro Pelas</h2>
            <div class="price__table">
                <% if (typeof productos !== 'undefined' && productos.length > 0) { %>
                    <% let hayPelas = false; %>
                    <% productos.forEach(producto => { %>
                         <%# Verifica si la categoría existe y empieza con 'homevideo' %>
                         <% if (producto.categoria && producto.categoria.toLowerCase().startsWith('homevideo')) { %>
                            <% hayPelas = true; %>
                            <div class="price__element">
                                <figure class="price__picture">
                                    <img src="<%= producto.imagen_url %>" alt="<%= producto.nombre %>" class="price__img">
                                </figure>
                                <p class="price__name"><%= producto.nombre %></p>
                                <h3 class="price__precio">s/.<%= parseFloat(producto.precio).toFixed(2) %></h3>
                                <%# ----- ASEGÚRATE DE QUE ESTA LÍNEA ES CORRECTA ----- %>
                                <a href="/producto/<%= producto.id %>" class="price__cta">Ver Detalles</a>
                                <%# ---------------------------------------------------- %>
                            </div>
                        <% } %>
                    <% }); %>
                     <% if (!hayPelas) { %><p>No hay películas disponibles.</p><% } %>
                <% } else { %>
                    <p>No hay productos disponibles en este momento.</p>
                <% } %>
            </div>
        </section>

        <div class="subir"><a href="#subir" class="subir__link">Ir al Inicio</a></div>
    </main>

    <footer class="footer">
       <section class="footer__container container">
           <nav class="nav nav--footer">
               <h2 class="footer__title">La RetroMusicVideo</h2>
               <ul class="nav__link nav__link--footer">
                   <li class="nav__items"><a href="/" class="nav__links">Inicio</a></li>
                   <li class="nav_items"><a href="/acerca.html" class="nav__links">Acerca de</a></li>
                   <li class="nav_items"><a href="/contacto.html" class="nav__links">Contacto</a></li>
                   <li class="nav_items"><a href="/tienda" class="nav__links">Tienda</a></li>
               </ul>
           </nav>
           <form class="footer__form" action="https://formspree.io/f/xdkajqvr" method="POST">
               <h2 class="footer__newsletter">Suscribete a la newsletter</h2>
               <div class="footer__inputs">
                   <input type="email" placeholder="Email: " class="footer__input" name="email">
                   <input type="submit" value="Registrate" class="footer__submit">
               </div>
           </form>
       </section>
       <section class="footer__copy container">
           <div class="footer__social">
               <a href="#" class="footer__icons"><img src="/images/facebook.svg" alt="fb" class="footer__img"></a>
               <a href="#" class="footer__icons"><img src="/images/ig.svg" alt="ig" class="footer__img"></a>
               <a href="#" class="footer__icons"><img src="/images/yt.svg" alt="yt" class="footer__img"></a>
           </div>
           <h3 class="footer__copyright">Derechos reservados &copy; Coco Elias</h3>
       </section>
   </footer>

    <script src="/js/menutienda.js" defer></script>
    <script src="/js/bannertienda.js" defer></script>

</body>
</html>